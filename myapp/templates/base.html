{% load static %}
<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <!-- Bootstrap CSS -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" rel="stylesheet">
    <!-- Font A/wesome -->
    <script crossorigin="anonymous" src="https://kit.fontawesome.com/dd93bccd80.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/5.0.0/mdb.min.css" rel="stylesheet"/>
    <!-- stylesheet -->
    <link href="{% static 'css/style.css'%}" rel="stylesheet">
    <title>
        Great Knight Chess
    </title>
     <style>
        .spinner {
            display: inline-block;
            margin-top: 7px;
            width: 30px;
            height: 30px;
            position: relative;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: rgb(18, 18, 18);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }
    </style>
    <link rel = "icon" href =
"https://img1.wsimg.com/isteam/ip/5746224d-b7a9-443b-a463-afcc774bef0f/favicon/ee3dfa24-14dc-4fe1-bdfc-1db8e50d68a0.png"
        type = "image/x-icon">
</head>

<body>

{% if announcements %}
<marquee width="100%" direction="right" height="100px" id="marqe" behavior="scroll" scrollamount="10" loop >
<!--<p>Welcome to Great Knights Chess</p>-->
<!--    <p class="m2-2">Welcome to Great Knights Chess</p>-->
<!--    <p class="m2-2">Welcome to Great Knights Chess</p>-->
    <ul class="d-flex align-items-center m-0">
        {% for announcement in announcements %}
        <li class="mx-5">
            {{ announcement }}
        </li>
        {% endfor %}
    </ul>
</marquee>
{% endif %}



<header data-offset-top="197" data-spy="affix" id="Main-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 pt-lg-5 pb-lg-2 pb-md-2 pt-md-4 pt-4 pb-3">
                <div class="d-flex justify-content-between">
                    <div class="col-2 d-flex align-items-center justify-content-center">
                        <i class="fa-solid fa-bars" id="menubar"></i>
                    </div>
                    <div class="col-8 text-center logo d-flex justify-content-center">
                        <h3><a href="{% url 'home' %}">Great Knights Chess</a></h3>
                    </div>
                    <div class="col-2">
                        <div
                                class="header-icons d-flex justify-content-lg-end justify-content-md-end justify-content-center align-items-center  position-relative">

                            <!-- Define a button to toggle the search area -->
                            <form action="" class="search-form" method="get" role="search">
                                <label>

                                    <input class="search-field mt-0 " name="s" placeholder="Search â€¦"
                                           title="Search for:"
                                           type="search" value=""/>
                                </label>
                                <input class="search-submit" type="submit" value="Search"/>
                            </form>
                            <div class="dropdown ms-3 mt-lg-0 mt-3" id="cart-dropdown">
                                <a aria-expanded="false" class="dropdown-toggle" data-bs-toggle="dropdown" href="#"
                                   id="dropdownMenuLink" role="button">
                                    <i class="fa-solid fa-cart-shopping">
                                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-dark text-light"
                                              id="cartIcon">
                                            0
                                        </span>
                                    </i>
                                </a>

                                <ul aria-labelledby="dropdownMenuLink" class="dropdown-menu py-2"
                                    style="border-radius:0.25rem ;">
                                    <div id="productsOptions">
                                        <a class="dropdown-item" href="{% url 'productForm' %}" id="cart_item">
                                                <span class="items-details me-2"
                                                      id="product_items">
                                                0</span>
                                            Products
                                        </a>
                                    </div>
                                    <hr>
                                    <li>
                                        <a class="dropdown-item" href="#" id="cartitems">
                                                <span class="items-details me-2"
                                                      id="serviceitems">
                                                0</span>
                                            Services
                                        </a>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

</header>


<!-- Navbar -->
<section data-offset-top="197" data-spy="affix" id="navigation">
    <nav class="container nav_items py-3 px-0">
        <ul class="d-flex flex-row justify-content-between navbar-nav">
            <li class="nav-item">
                <a {% if request.resolver_match.url_name == 'home' %} class="nav-link active" {% else %} class="nav-link" {% endif %} href="{% url 'home' %}">HOME</a>
            </li>
            <li class="nav-item">
                <a {% if request.resolver_match.url_name == 'schedule' %} class="nav-link active" {% else %} class="nav-link" {% endif %} href="{% url 'schedule' %}">SCHEDULE</a>
            </li>
            <li class="nav-item">
                <a {% if request.resolver_match.url_name == 'partners' %} class="nav-link active" {% else %} class="nav-link" {% endif %} href="{% url 'partners' %}">OUR PARTNERS</a>
            </li>
            <li class="nav-item">
                <a {% if request.resolver_match.url_name == 'blog' %} class="nav-link active" {% else %} class="nav-link" {% endif %} href="{% url 'blog' %}">BLOG</a>
            </li>
            <li class="nav-item">
                <a {% if request.resolver_match.url_name == 'team' %} class="nav-link active" {% else %} class="nav-link" {% endif %} href="{% url 'team' %}">MEET THE TEAM</a>
            </li>
            <li class="nav-item">
                <a {% if request.resolver_match.url_name == 'signup' %} class="nav-link active" {% else %} class="nav-link" {% endif %} href="{% url 'signup' %}">SIGN UP!</a>
            </li>
            <li class="nav-item">
                <a {% if request.resolver_match.url_name == 'chess' %} class="nav-link active" {% else %} class="nav-link" {% endif %} href="{% url 'chess' %}">CHESS</a>
            </li>
            <li class="nav-item">
                <a {% if request.resolver_match.url_name == 'contact' %} class="nav-link active" {% else %} class="nav-link" {% endif %} href="{% url 'contact' %}">CONTACT US</a>
            </li>
            <li class="dropdown nav-item d-flex align-items-center">
                <a aria-expanded="false" class="dropdown-toggle" data-bs-toggle="dropdown"
                   href="" id="dropdownMenuLink">MORE</a>
                <ul aria-labelledby="dropdownMenuLink" class="dropdown-menu shadow py-2">
                    <li class="ps-0"><a class="dropdown-item" href="{% url 'flayers' %}" id="More">FORMS AND FLYERS</a>
                    </li>
                    <li class="ps-0"><a class="dropdown-item" href="{% url 'products' %}" id="More">SHOP</a></li>
                </ul>
            </li>
        </ul>

    </nav>
</section>


<!-- sidenav -->

<section id="sidenav">
    <div class="nav_items">
        <a class="fa-solid fa-xmark" id="closemark" style="font-size:25px; position: absolute;
                right: 38px;top: 2.7%;"></a>

        <ul class="d-flex flex-column justify-content-center navbar-nav p-3 mt-5">
            <li class="nav-item">
                <a class="nav-link active" href="{% url 'home' %}">HOME</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'schedule' %}">SCHEDULE</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'partners' %}">OUR PARTNERS</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'blog' %}">BLOG</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'team' %}">MEET THE TEAM</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'signup' %}">SIGN UP!</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'chess' %}">CHESS</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'contact' %}">CONTACT US</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'flayers' %}">FORMS AND FLYERS</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'products' %}">SHOP</a>
            </li>

            <div class="input-group">
                <i class="fa fa-search" id="search-search"></i>
                <input class="form-control" id="" placeholder="Search Products" type="search" value="">
            </div>

        </ul>
    </div>
    <!-- <div class="modal-backdrop fade show"></div> -->

    </div>
</section>

<!-- sidenav-2 -->

<section id="sidenav1">
    <form id="regForm">

        <div class="tab-tab">
            <div class="nav_items">
                <div class="d-flex justify-content-between p-3 side-nav-header">
                    <div>
                        <i class="fa-solid fa-cart-shopping mt-1" style="color:black;"></i>
                        <span id="inside_cart"
                                style="border-radius:50%; background-color:#2b2b2b; color: white; padding: 1px 6px;">0</span>
                    </div>
                    <a class="fa-solid fa-xmark" id="closemark1" style="font-size:25px;"></a>
                </div>
                <div class="sidenav-content text-center p-5" id="empty_services" style="display:none">
                    <h2>Cart is empty</h2>
                    <p>Looks like you just haven't found the right thing yet.</p>
                    <a href="{% url 'signup' %}">Browse Services</a>
                </div>
                <div id="cartdiv">
                <div id="q1">
                </div>
                <div class="sub-total d-flex justify-content-end px-3 pt-3">
                    <p>Subtotal</p>
                    <p class="ms-2" id="totalAmount"></p>
                </div>
                <div class="px-3 pb-3">
                    <div class="book-details p-3">
                        <p>Student Info</p>
                            <div class="row g-3">
                                <div class="col-6">
                                    <label for="inputEmail4" class="form-label">First Name <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <input id="inputEmail4" type="text" class="form-control" placeholder="" aria-label="First name"
                                        oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid name.
                                    </div>
                                </div>
                                <div class="col-6">
                                    <label for="inputEmail5" class="form-label">Last name <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <input id="inputEmail5" type="text" class="form-control" placeholder="" aria-label="Last name"
                                        oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid name.
                                    </div>
                                </div>
                                <div class="col-12 mb-4">
                                    <label for="inputState" class="form-label">Grade level <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <select id="inputState" class="form-select form-control" style="text-indent: 3px;" required>
                                      <option selected>-----</option>
                                      <option>kindergarden</option>
                                      <option>1</option>
                                      <option>2</option>
                                      <option>3</option>
                                      <option>4</option>
                                      <option>5</option>
                                      <option>6</option>
                                      <option>7</option>
                                      <option>8</option>
                                      <option>9</option>
                                      <option>10</option>
                                      <option>11</option>
                                      <option>12</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select a grade level.
                                    </div>
                                  </div>
                            </div>

                            <p>Parent's Info</p>
                            <div class="row g-3">
                                <div class="col-6">
                                    <label for="inputEmail6" class="form-label">First Name <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <input id="inputEmail6" type="text" class="form-control" placeholder="" aria-label="First name"
                                        oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid name.
                                    </div>
                                </div>
                                <div class="col-6">
                                    <label for="inputEmail7" class="form-label">Last name <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <input id="inputEmail7" type="text" class="form-control" placeholder="" aria-label="Last name"
                                        oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid name.
                                    </div>
                                </div>

                                <div class="col-6">
                                    <label for="inputEmail8" class="form-label">1st Phone Number <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <input type="tel" class="form-control" id="inputEmail8"
                                        oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid number.
                                    </div>
                                </div>
                                <div class="col-6">
                                    <label for="inputEmail9" class="form-label">2nd Phone Number <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <input type="tel" class="form-control" id="inputEmail9"
                                        oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid number.
                                    </div>
                                </div>
                                <div class="col-12 mb-4">
                                    <label for="inputEmail21" class="form-label">Email <b style="color:red; font-size: large;"><sup>*</sup></b></label>
                                    <input type="email" class="form-control" id="inputEmail21" oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid email address.
                                    </div>
                                </div>
                            </div>

                            <p>Emergency Contact Info</p>
                            <div class="row g-3">
                                <div class="col-6">
                                    <label for="inputEmail3" class="form-label">First Name <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <input id="inputEmail3" type="text" class="form-control" placeholder="" aria-label="First name"
                                        oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid name.
                                    </div>
                                </div>
                                <div class="col-6">
                                    <label for="inputEmail2" class="form-label">Last name <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <input id="inputEmail2" type="text" class="form-control" placeholder="" aria-label="Last name"
                                        oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid name.
                                    </div>
                                </div>

                                <div class="col-6">
                                    <label for="inputEmail1" class="form-label">Phone Number <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <input type="tel" class="form-control" id="inputEmail1"
                                        oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid number.
                                    </div>
                                </div>
                                <div class="col-6">
                                    <label for="inputEmail" class="form-label">Contact Relation <b style="color:red; font-size: large; "><sup>*</sup></b></label>
                                    <input type="text" class="form-control" id="inputEmail"
                                        oninput="this.className = ''" required>
                                    <div class="invalid-feedback">
                                        Please enter a relation.
                                    </div>
                                </div>
                            </div>
                        </div>
                    <div class="mt-4">
                        <button class="pay-btn justify-content-center align-items-center" id="nextBtn"
                                onclick="nextPrev(1)"
                                type="button">Continue to
                            Payment
                        </button>
                        <a class="bookmore-btn justify-content-center align-items-center" type="link" href="{% url 'signup' %}">Book
                            More
                            Services
                        </a>
                    </div>
                </div>
                    </div>
            </div>
        </div>
        <div class="tab-tab">
            <div class="nav_items">
                <div class="d-flex justify-content-between p-3 side-nav-header">
                    <div id="prevBtn" onclick="nextPrev(-1)">
                        <i class="fa-solid fa-angle-left mt-1" style="color:black; font-size: 1.2rem;"></i>
                        <span style="color:#2b2b2b ;">Cart</span>
                    </div>
                    <a class="fa-solid fa-xmark" id="closemark1" style="font-size:25px;"></a>
                </div>

                <div class="sidenav-content d-flex justify-content-between p-3">

                    <div class="cart-total-detail col-6">
                        <h6>Subtotal</h6>
                        <h6 class="mb-0">Total</h6>
                    </div>

                    <div class="cart-total-detail text-end col-6">
                        <p class="mb-0" id="price1">$00.00</p>
                        <p class="mb-0" id="price2">$00.00</p>
                    </div>
                </div>
                <div class="cart-total-detail d-flex justify-content-between px-3 pt-2">
                    <div class="Due-now">
                        <p class="mb-0">Total due now</p>
                    </div>
                    <div class="Due-now">
                        <p class="ms-2 mb-0" id="price3">$00.00</p>
                    </div>
                </div>

                <div class="px-3 pt-1 pb-2">
                    <div class="stripe-button text-center" onclick="stripeFunction()">
                        <i id="stripe-icon" class="fa-brands fa-stripe"></i><div id="spinner" class="spinner hidden"></div></div>
                </div>
                            <script>
                                function loadScript(url, callback) {
                                    var script = document.createElement('script');
                                    script.type = 'text/javascript';
                                    script.src = url;

                                    // Execute callback after the script is loaded
                                    script.onload = callback;

                                    document.head.appendChild(script);
                                }

                                function showSpinner() {
                                    var spinner = document.getElementById('spinner');
                                    spinner.classList.remove('hidden');
                                    var stripeIcon = document.getElementById('stripe-icon');
                                    stripeIcon.classList.add('hidden');
                                }

                                function hideSpinner() {
                                    var spinner = document.getElementById('spinner');
                                    spinner.classList.add('hidden');
                                    var stripeIcon = document.getElementById('stripe-icon');
                                    stripeIcon.classList.remove('hidden');
                                }

                                function scriptLoaded() {
                                    // Code to execute after the script is loaded
                                    console.log('JavaScript loaded!');
                                    hideSpinner();
                                }
                            </script>
<!--                <div class="px-3 pt-2">-->
<!--                    <div class="card-details p-3">-->
<!--                        <p>Pay with a card</p>-->
<!--                        <div class="row p-3">-->
<!--                            <div class="d-flex align-items-center justify-content-between card-atm border rounded">-->
<!--                                <div class="fa-solid fa-credit-card ps-3" style="font-size:1.1rem;"></div>-->
<!--                                <input class="form-control form_form" placeholder="Card Details"-->
<!--                                       style="text-indent:3px;"-->
<!--                                       type="text">-->
<!--                                <div class="d-flex w-50">-->
<!--                                    <input class="form-control px-0 form_form" placeholder="MM/YY"-->
<!--                                           style="text-indent:0;"-->
<!--                                           type="text">-->
<!--                                    <input class="form-control px-0 form_form" maxlength=3 placeholder="CVV"-->
<!--                                           style="text-indent:15px;" type="password" autocomplete="on">-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="mt-4">-->
<!--                        <button class="pay-btn justify-content-center align-items-center" type="button">Confirm-->
<!--                            Booking-->
<!--                        </button>-->
<!--                        &lt;!&ndash; <button type="button" class="bookmore-btn justify-content-center align-items-center">Book-->
<!--                            More-->
<!--                            Services</button> &ndash;&gt;-->
<!--                    </div>-->
<!--                </div>-->
            </div>

        </div>
        <div class="all-steps" id="all-steps"><span class="step-step"></span> <span class="step-step"></span></div>
    </form>
</section>
<!-- Footer -->

{% block content %}
{% endblock %}

<!-- Footer -->

<footer id="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div
                        class="footer-content d-lg-flex d-md-flex justify-content-between text-lg-start text-md-start text-center py-3">
                    <p>COPYRIGHT &#169; 2023 GREAT KNIGHTS CHESS - ALL RIGHTS RESERVED</p>
                    <div class="d-flex justify-content-center mt-lg-0 mt-md-0 mt-2">
                        <a href=""><i class="fa-brands fa-facebook"></i></a>
                        <a href=""><i class="fa-brands fa-instagram ms-3"></i></a>
                        <a href=""><i class="fa-brands fa-twitter ms-3"></i></a>
                        <a href=""><i class="fa-brands fa-skype ms-3"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>


<script>
    function validateEmail(email) {
        var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        return emailRegex.test(email);
    }

    function validatePhoneNumber(phone) {
        var phoneRegex = /^\+?\d+$/;
        return phoneRegex.test(phone);
    }
    document.getElementById('inputState').addEventListener('change', function() {
        this.className = 'form-select form-control';
    });
        //your javascript goes here
        var currentTab = 0;
        document.addEventListener("DOMContentLoaded", function (event) {


            showTab(currentTab);

        });

        function showTab(n) {
            var x = document.getElementsByClassName("tab-tab");
            x[n].style.display = "block";
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }
            if (n == (x.length - 1)) {
                document.getElementById("nextBtn").innerHTML = "Submit";
            } else {
                document.getElementById("nextBtn").innerHTML = "Next";
            }
            fixStepIndicator(n)
        }

        function nextPrev(n) {
            if(n==1){
                if(!validateForm()){
                    return false;
                }
            }
            var x = document.getElementsByClassName("tab-tab");
            x[currentTab].style.display = "none";
            currentTab = currentTab + n;
            if (currentTab >= x.length) {
                document.getElementById("nextprevious").style.display = "none";
                document.getElementById("all-steps").style.display = "none";
                document.getElementById("register").style.display = "none";
                document.getElementById("text-message").style.display = "block";
            }
            showTab(currentTab);
        }

        function validateForm() {
            var isValid = true;

            var parentFirstName = document.getElementById('inputEmail6').value.trim();
            var parentLastName = document.getElementById('inputEmail7').value.trim();
            var phone1 = document.getElementById('inputEmail8').value.trim();
            var phone2 = document.getElementById('inputEmail9').value.trim();
            var email = document.getElementById('inputEmail21').value.trim();
            var firstName = document.getElementById('inputEmail3').value.trim();
            var lastName = document.getElementById('inputEmail2').value.trim();
            var phoneNumber = document.getElementById('inputEmail1').value.trim();
            var contactRelation = document.getElementById('inputEmail').value.trim();
            var studentfirstName = document.getElementById('inputEmail4').value.trim();
            var studentlastName = document.getElementById('inputEmail5').value.trim();
            var gradeLevel = document.getElementById('inputState').value;
            if (parentFirstName === '') {
                isValid = false;
                document.getElementById('inputEmail6').className = 'form-control is-invalid';
            }

            if (parentLastName === '') {
                isValid = false;
                document.getElementById('inputEmail7').className = 'form-control is-invalid';
            }

            if (!validatePhoneNumber(phone1)) {
                isValid = false;
                document.getElementById('inputEmail8').className = 'form-control is-invalid';
            }

            if (!validatePhoneNumber(phone2)) {
                isValid = false;
                document.getElementById('inputEmail9').className = 'form-control is-invalid';
            }

            if (email === '' || !validateEmail(email)) {
                isValid = false;
                document.getElementById('inputEmail21').className = 'form-control is-invalid';
            }
            if (firstName === '') {
                isValid = false;
                document.getElementById('inputEmail3').className = 'form-control is-invalid';
            }

            // Validate Last Name
            if (lastName === '') {
                isValid = false;
                document.getElementById('inputEmail2').className = 'form-control is-invalid';
            }

            // Validate Phone Number
            if (!validatePhoneNumber(phoneNumber)) {
                isValid = false;
                document.getElementById('inputEmail1').className = 'form-control is-invalid';
            }

            // Validate Contact Relation
            if (contactRelation === '') {
                isValid = false;
                document.getElementById('inputEmail').className = 'form-control is-invalid';
            }
             if (studentfirstName === '') {
                isValid = false;
                document.getElementById('inputEmail4').className = 'form-control is-invalid';
            }

            // Validate Last Name
            if (studentlastName === '') {
                isValid = false;
                document.getElementById('inputEmail5').className = 'form-control is-invalid';
            }

            // Validate Grade Level
            if (gradeLevel === '-----') {
                isValid = false;
                document.getElementById('inputState').className = 'form-select form-control is-invalid';
            }
            return isValid;
        }

        function fixStepIndicator(n) {
            var i, x = document.getElementsByClassName("step-step");
            for (i = 0; i < x.length; i++) { x[i].className = x[i].className.replace(" active", ""); }
            x[n].className += " active";
        }
</script>
<script>
                    function updateCart(){
                        let x = JSON.parse(localStorage.getItem("services"));
                        console.log('services',x)
                        let y = JSON.parse(localStorage.getItem("items"));
                        console.log('items',y)
                        if(x && x.length > 0)
                        {
                            document.getElementById("empty_services").style.display="none";
                            document.getElementById("cartdiv").style.display="block";
                            let total=0;
                            for (let i=0;i<x.length;i++)
                            {
                                total=total+parseInt(x[i].price);
                                document.getElementById("q1").insertAdjacentHTML("afterend",
                                `
                                    <div id='qadeer2${i}' class="sidenav-content d-flex justify-content-between p-3">
                                        <div class="sidenav-data col-6">
                                            <h4>${x[i].school}</h4>
                                            <p>${x[i].instructor_name}</p>
                                            <small>${x[i].time}</small>
                                        </div>

                                        <div class="book-price text-end col-6">
                                            <p>$${x[i].price}</p>
                                            <i class="fa-solid fa-trash" onclick="removeFromCart(${i})"></i>
                                        </div>
                                    </div>
                                `
                                );
                            }
                            console.log("total")
                            if(y && y.length > 0) {
                            document.getElementById("inside_cart").innerHTML=x.length+y.length;
                            document.getElementById("cartIcon").innerHTML=x.length+y.length;
                            document.getElementById("product_items").innerHTML=y.length;
                            }
                            else{
                                document.getElementById("cartIcon").innerHTML=x.length;
                                document.getElementById("inside_cart").innerHTML=x.length;
                            }
                            document.getElementById("totalAmount").innerHTML=`$${total}`;
                            document.getElementById("price1").innerHTML=`$${total}`;
                            document.getElementById("price2").innerHTML=`$${total}`;
                            document.getElementById("price3").innerHTML=`$${total}`;
                            document.getElementById("serviceitems").innerHTML=x.length;
                        }
                        else{
                        document.getElementById("empty_services").style.display="block";
                        document.getElementById("cartdiv").style.display="none";
                        document.getElementById("totalAmount").innerHTML=0;
                        document.getElementById("serviceitems").innerHTML=0;
                        document.getElementById("product_items").innerHTML=0;
                        document.getElementById("cartIcon").innerHTML=0;
                        document.getElementById("inside_cart").innerHTML=0;
                        if(y && y.length>0) {
                            document.getElementById("cartIcon").innerHTML=y.length;
                            document.getElementById("inside_cart").innerHTML=y.length;
                            document.getElementById("product_items").innerHTML=y.length;
                        }
                        document.getElementById("price1").innerHTML=0;
                        document.getElementById("price2").innerHTML=0;
                        document.getElementById("price3").innerHTML=0;
                        }
                    }
                    updateCart();
                    function removeFromCart(index)
                    {
                        let x = JSON.parse(localStorage.getItem("services"));
                        console.log(x)
                        console.log(index,'index')
                        let filtered2 = x.filter((item,i) => i !== index)
                        console.log(filtered2,'filter one');
                        localStorage.setItem("services", JSON.stringify(filtered2));
                        if(x){
                        for(let j=0;j<x.length;j++){
                        console.log(x.length,'dd');
                        console.log(`qadeer2${j}`)
                        const element = document.getElementById(`qadeer2${j}`);
                        element.remove();
                        }
                        }
                        updateCart();
                    }

                    function updateAfterRemove(index){
                    let total=0;
                    let x = JSON.parse(localStorage.getItem("services"));
                    console.log(x.length,'length')
                    if(x){
                        for(let j=0;j<x.length;j++){
                        console.log(x.length,'dd');
                        console.log(`qadeer2${j}`)
                        const element = document.getElementById(`qadeer2${j}`);
                        element.remove();
                        }
                    }
                    document.getElementById("totalAmount").innerHTML=total;
                    }
</script>

<script>
        var btns =
            $("#navigation .navbar-nav .nav-link");

        for (var i = 0; i < btns.length; i++) {
            btns[i].addEventListener("click",
                function () {
                    var current = document
                        .getElementsByClassName("active");

                    current[0].className = current[0]
                        .className.replace(" active", "");

                    this.className += " active";
                });
        }


{% if request.GET.q %}
    console.log('hello qqq');
    localStorage.removeItem("services");
    updateCart();
{% endif %}






</script>

<!----------------------- ReadMore Button ----------------------->
<script>
        function myFunction() {
            var dots = document.getElementById("dots");
            var moreText = document.getElementById("more");
            var btnText = document.getElementById("myBtn");

            if (dots.style.display === "none") {
                dots.style.display = "inline";
                btnText.innerHTML = "Read more";
                moreText.style.display = "none";
            } else {
                dots.style.display = "none";
                btnText.innerHTML = "Read less";
                moreText.style.display = "inline";
            }
        }

        function mycard() {
            var dots1 = document.getElementById("dotscard");
            var moreText1 = document.getElementById("morecard");
            var btnText1 = document.getElementById("mycard");

            if (dots1.style.display === "none") {
                dots1.style.display = "inline";
                btnText1.innerHTML = "Read more";
                moreText1.style.display = "none";
            } else {
                dots1.style.display = "none";
                btnText1.innerHTML = "Read less";
                moreText1.style.display = "inline";
            }
        }
        $(".nav-item a").on("click", function () {
            $(".nav-item a").removeClass("active");
            $(this).addClass("active");
        });









</script>
<!-- Optional JavaScript; choose one of the two! -->
<script src="https://js.stripe.com/v3/"></script>
<script src="{% static 'js/index.js'%}"></script>
<script>
function make() {

var fn=document.getElementById('inputEmail4').value;
var ln=document.getElementById('inputEmail5').value;
var gl=document.getElementById('inputState').value;
var pfn=document.getElementById('inputEmail6').value;
var pln=document.getElementById('inputEmail7').value;
var pno=document.getElementById('inputEmail8').value;
var pnt=document.getElementById('inputEmail9').value;
var email=document.getElementById('inputEmail21').value;
var emrfn=document.getElementById('inputEmail3').value;
var emrln=document.getElementById('inputEmail2').value;
var emrp=document.getElementById('inputEmail1').value;
var emrrl=document.getElementById('inputEmail1').value;
let data={
    firstname:fn,
    lastname:ln,
    grade_level:gl,
    parent_first_name:pfn,
    parent_last_name:pln,
    parent_phone_one:pno,
    parent_phone_two:pnt,
    email:email,
    emergency_person_firstname:emrfn,
    emergency_person_lastname:emrln,
    emergency_person_phone:emrp,
    emergency_person_relation:emrrl,

}
console.log(data,'data');
}

function stripeFunction(){
    showSpinner()
    var st_first_name=document.getElementById("inputEmail4").value;
     var st_last_name=document.getElementById("inputEmail5").value;
     var grade_level=document.getElementById("inputState").value;
     var pr_first_name=document.getElementById("inputEmail6").value;
     var pr_last_name=document.getElementById("inputEmail7").value;
     var phone_number_one=document.getElementById("inputEmail8").value;
     var phone_number_two=document.getElementById("inputEmail9").value;
     var email=document.getElementById('inputEmail21').value;
     var emr_first_name=document.getElementById("inputEmail3").value;
     var emr_last_name=document.getElementById("inputEmail2").value;
     var emr_phone_number=document.getElementById("inputEmail1").value;
     var relation=document.getElementById("inputEmail").value;
     let info={
        st_first_name:st_first_name,
        st_last_name:st_last_name,
        grade_level:grade_level,
        pr_first_name:pr_first_name,
        pr_last_name:pr_last_name,
        phone_number_one:phone_number_one,
        phone_number_two:phone_number_two,
        email:email,
        emr_first_name:emr_first_name,
        emr_last_name:emr_last_name,
        emr_phone_number:emr_phone_number,
        relation:relation
     }
    var servicesData=JSON.parse(localStorage.getItem('services'))
    console.log(servicesData)
    fetch("/config/")
    .then((result) => { return result.json(); })
    .then((data) => {
      // Initialize Stripe.js
      console.log(data,'json data')
        hideSpinner()
      const stripe = Stripe(data.publicKey);
    $(document).ready(function () {
            var things = JSON.parse(localStorage.getItem('services'));
            console.log("things")
            let body={
                productsData: things,
                customerInformation:info,
            }
        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'POST',
            url: '{% url 'services-checkout-session' %}',
            headers: {//<==
                "X-CSRFTOKEN": "{{ csrf_token }}"//<==
            },
            data: JSON.stringify(body),
            success: function(data) {
            //Success code
            hideSpinner()
            return stripe.redirectToCheckout({sessionId: data.sessionId})
            },
            failure: function (response) {
                hideSpinner()
                $('#result').html(response);
            }
        });
    });
});
}





</script>
<script crossorigin="anonymous"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- MDB -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/5.0.0/mdb.min.js" type="text/javascript"></script>

</body>

</html>